[tox]
envlist = docs, syntax, py37
envlogdir = {envtmpdir}/log
skipsdist=true

[testenv:docs]
basepython = python
envdir = {toxworkdir}/docs
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/requirements_dev.txt
commands =
    sh -c 'for ((n=0;n<200;n++)); do echo; done'
    make docs

[testenv:syntax]
basepython = python
envdir = {toxworkdir}/syntax
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/requirements_dev.txt
commands =
    sh -c 'for ((n=0;n<200;n++)); do echo; done'
    mypy archops_os_updates tests
    pylint setup.py archops_os_updates tests

[testenv:py37]
deps =
    pytest
    pytest-runner
    pytest-cov
basepython = python3.7
envdir = {toxworkdir}/py37
commands =
    sh -c 'for ((n=0;n<200;n++)); do echo; done'
    pip install -q -e .
    py.test --cov={toxinidir}/archops_os_updates --basetemp={envtmpdir} # use '-s' for debugging

